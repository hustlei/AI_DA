=============================
概率统计基础知识
=============================

# 1. 基本概念

## 1.1 随机变量

+ 随机变量（random variable）：取值具有随机性的变量。
    + 离散型随机变量：只能取有限个数值的随机变量。
    + 连续型随机变量：取值充满一个或若干有限或无限区间。

## 1.2 概率分布

+ 概率分布：随机变量X的各个值$x_i$的概率。
	- $P(X=x_i)=p_i$。取值为$x_i$的概率为$p_i$。
	- $\sum{p_i}=1, p_i\ge0$。概率值不小于0，随机变量所有可能取值概率之和为1。
+ 累积分布函数：随机变量X小于等于值x的总概率$F(x)=P(X≤x)$。
    + $F(-\infty)=0，F(+\infty)=1$。
    + 对于离散型随机变量 $F(x)=\sum_{x_i≤x}p_i$。
+ 概率密度函数。概率密度函数$f(x)$是一个通过积分可以得到累积分布函数的函数。即满足：$F(x)=\int_{-\infty}^xf(t)dt$的非负函数。
    + $\int_{-\infty}^{\infty} f(x)dx=1, f(x)≥0$
    
## 1.3 随机数分布的基本统计量

随机变量分布的特征，可以用多种数值指标表示。

+ 数学期望：随机变量X的所有可能值的加权平均值，权重为发生概率。反映随机变量平均取值的大小，也称为期望或均值。
    + 离散型随机变量期望：$\mu=E(X)=\sum_{i=1}^Np_ix_i$
	+ 连续型随机变量期望：$\mu=E(X)=\sum_{-\infty}^{\infty}xf(x)dx$
+ 方差：随机变量偏离均值的程度。
	+ 离散随机变量的方差：$\sigma^2=var(X)=E([X-\mu]^2)=\sum_{i=1}^N(x_i-\mu)^2$
	+ 连续随机变量的方差：$\sigma^2=var(X)=E([X-\mu]^2)=\int_{-\infty}^\infty(x-\mu)^2f(x)dx$

> 注意，上述期望和方差和我们通常计算用的公式并不完全一致，这是因为：
> + 上述公式中的$x_i, x$都是只随机变量X可能的取值空间，
>     + 比如抛硬币，x取值就只能是正面、反面两个值。比如百分制考试分数就只能取`[0,100]`区间内数值。
> 	+ 公式中的值不会重复出现。以抛硬币为例：$x_1=0$(正面)概率为0.5，$x_2=1$(反面)概率为0.5，期望就是$E(x)=0*0.5+1*0.5=0.5$
>     + 注意离散变量的期望值可能是一个不可能存在的值。 

通常我们计算统计量并非是针对取值空间的，而是针对具体研究对象的变量实际取值。比如：

+ 抛骰子为例
    + 取值空间：为1,2,3,4,5,6。只有6个值。
    + 研究对象取值：抛N次筛子为对象。就有N个1-6组成的值序列，每个值都是可以重复的。
+ 学生分数为例
    + 取值空间：分数值为`[0,100]`之间的任意数。
    + 研究对象取值：N个学生的分数组成的序列。

对于具体研究对象的变量实际取值。比如抛骰子，抛出N次骰子，则得到：

`2, 3, 6, 1, 2, 4, 5, 3, 1, 2, 5, ...`

那么对于这个序列$\mu=E(X)=\sum_{i=1}^6p_ix_i=\frac{\sum x}N$。

> 以$x_2=2$为例，$x_2p_2=\frac{2的个数}N \times 2=\frac{所有2相加}N$。因此$\sum_{i=1}^6p_ix_i=\frac{\sum x}N$

因此，对于**具体研究对象**：

+ 数学期望：也称为均值。$\mu=E(X)=\frac{\sum x}N$。
+ 方差：$\sigma^2=var(X)=E([X-\mu]^2)=\frac{\int(x-\mu)^2dx}N$

<br>

在期望、方差的基础上还有很多其他的统计量：
    
+ n阶矩：随机变量X的n次方的期望。即：$E(X^n)$。
+ 中心矩：随机变量X与期望的差的n阶矩。即：$m_n=E([X-\mu]^n)$。
+ 偏度：三阶中心矩除以标准差的立方。表示概率分布的对称程度。
	+  $S=\frac{m_3}{m_2^{1.5}}=\frac{m_3}{\sigma^3}=\frac{E([X-\mu]^3)}{\sigma^3}$。
	+ 偏度S为0时，概率分布对称。正态分布S=0。
	+ 偏度S为正值时，表示分布有长的右拖尾(右偏)。
	+ 偏度S为负值时，表示分布有长的左拖尾(左偏)。
+ 峰度：四阶中心矩除以标准差的四次方。表示概率分布平坦程度。
	+  $K=\frac{m_4}{m_2^2}=\frac{m_4}{\sigma^4}=\frac{E([X-\mu]^4)}{\sigma^4}$。
	+ 如果K 值大于3，分布的凸起程度大于正态分布。
	+ 如果K 值小于3，分布相对于正态分布是平坦的。

>> 注意：正态分布无论如何缩放，峰度都是等于3，即使分布曲线变高变窄，或者变矮变宽，都不会变化。但是分布非常平坦，比如均匀分布，K值就会变化很大。

## 1.4 联合分布


+ 联合分布：两个或以上的随机变量的分布概率。
	- 对于两个离散的随机变量X,Y，联合分布为：$P(X=x_i,Y=y_j)=p_{ij}$
	- 对于两个连续的随机变量X,Y，联合分布为：$P(X,Y)=\iint{f(x,y)dxdy}$
+ 边际概率：联合分布中，单个随机变量的概率函数$f_X(x),f_Y(y)$。
	+ $f_X(x)=P(X=x_i)=\sum_{j=1}^\infty p_{ij}$, Y是离散的
	+ $f_X(x)=P(X=x_i)=\int_{-\infty}^\infty f(x,y)dy$， Y是连续的
+ 条件概率函数：Y=y条件下X=x时的概率。
	+ $P(X=x_i|Y=y_j)=\frac{P(X=x_i,Y=y_j)}{P(Y=y_j)}$, 离散变量
	+ $P(X=x_i|Y=y_j)=\frac{f(x,y)}{f_Y(y)}$, 连续变量
+  协方差：度量两个变量同时变化相关性的指标。
	+ $cov(X,Y)=E[(X-\mu_X)(Y-\mu_Y)]$
	+ 如果两个变量同方向变动(如一个变量增加，另一个变量也增加)，则协方差为正。
	+ 如果两个变量反方向变动(如一个变量增加，另一个变
量却减少)，则协方差为负。
	+ 如果两个随机变量是独立的，则协方差为0。
+ 相关系数：两个变量的协方差与各自标准差相乘的积之比。是两个随机变量线性相关程度的数字特征，符号与协方差符号相同。
	+ $\rho=\frac{cov(X,Y)}{\sigma_X\sigma_Y}$
	+ 相关系数经过了标准化处理，没有量纲，值在-1至1之间。
	+ 相关性较弱，值接近0。
	+ 绝对值接近1，相关性较强。符号代表相关方向，即正相关还是负相关。


# 2. 总体与样本统计计算

> 1.3节中简述了研究对象总体的变量统计。

+ 总体随机变量：统计中将所研究的对象称为总体。总体的某个相关变量X称为随机变量，通常简称为总体X。

比如全国人的年龄分布，比如十万次投筛子，比如工厂生产钉子的质量。但是想要知道总体全部数据常常是困难的，甚至是做不到的。通常我们只能抽取一部分数据，比如，抽取某几个时间段生产的钉子，作为样本抽查。

根据大数定理，当样本数量足够大时，计算的统计指标收敛于真实指标。因此我们一般情况下都只能统计样本的指标，然后根据样本推断总体的指标。


**样本相关概念**

+ 总体：研究对象的整个群体。
+ 样本：从总体中选取的一部分。
+ 样本数量：有多少个样本。
+ 样本大小（样本容量）：每个样本里包含多少个数据。

**样本的基本统计量**

+ 样本均值：$E(X)=\overline{x}=\frac{\sum x}N$。
+ 样本几何均值：几何均值为N个值的乘积的N次方根。
+ 样本中位数：样本按从小到大排列后的中间值。
    + 对于奇数个样本来说，中位数是位于中间的数据点。
    + 对于偶数个样本，中位数是两个中间数据的平均值。
+ 样本方差：衡量样本值对样本均值的偏离程度。$var(X)=\frac{\sum(x-\overline{x})^2}{N-1}$。
+ 样本标准差：样本方差的开方。$std(X)=\sigma=\sqrt{\frac{\sum(x-\overline{x})^2}{N-1}}$
+ 样本的n阶中心矩：$m_n=\frac{\sum(x-\overline{x})^n}{N-1}$
+ 样本的偏度：$S=\frac{m_3}{\sigma^3}$。
+ 样本的峰度：$S=\frac{m_4}{\sigma^4}$

> 注意样本求方差的公式都是除以N-1，而不是N。这是因为样本的均值并不能完全与总体的均值相同。
> 样本均值偏离总体均值后，会导致方差计算值偏小。因此除以N-1修正。
> 在样本数越大，样本的方差(除以N-1)与总体方差(除以N)越接近。

![无偏]()

如图所示：右侧有偏的点，整体远离总体均值(黑色点)。对自身均值(蓝色点)计算的方差一定小于对总体均值(黑色点)计算的方差。


**样本相关性统计量**

+ 样本协方差：$c_{xy}=\frac{\sum{(x-\overline{x})(y-\overline{y})}}{N-1}$
+ 样本相关系数：$r=\frac{c_{xy}}{\sigma_x \sigma_y}=\frac{\sum{(x-\overline{x})(y-\overline{y})}}{\sqrt{\sum{(x-\overline{x})^2}\sum{(y-\overline{y})^2}}}$


# 3. 统计量的基本性质

期望的性质(期望表示随机变量中心位置)

+ 性质1：**期望的线性关系**：$E(X+Y)=E(X)+E(Y)$。
+ 性质3：**期望的乘积关系**：$E(XY)=E(X) \cdot E(Y)$
+ 性质2：多个样本合并均值等于各个样本均值的期望。$E(\overline{X})=E(\frac{X_1+X_2+...+X_n}n)$

方差的性质(方差表示数据的分散程度。数据波动越大，方差就越大)

+ 性质1：**方差倍数性质**。$Var(bX)=b^2Var(X)$。
+ 性质2：两个**独立随机变量方差线性关系**。$Var(X+Y)=Var(X)+Var(Y)$。
+ 性质3：方差期望关系。$Var(x)=E(x^2)-E(x)^2$。
+ 性质4：样本均值的方差。$Var(\overline{X})=Var(\frac{X_1+X_2+...+X_n}n)$